<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:smp="http://java.sun.com/jsf/composite/smp">
    <ui:composition template="/templates/page-template.xhtml">        
        <ui:define name="page-content">
            <style>
                .ui-widget-header .ui-inputfield, .ui-widget-content .ui-inputfield{
                    width: 70px;
                }
            </style>
            <h:form id="frmPrincipal" >                 
                <p:panel>
                    <p:commandButton value="GUARDAR"   
                                     rendered="#{novedadBean.puedeModificar() }"
                                     action="#{novedadBean.guardarNovedadPopup()}"/>
                    <p:commandButton value="REGRESAR"           
                                     action="#{novedadBean.regresarLista()}"
                                     immediate="true"
                                     ajax="false"/>
                    <p:commandButton value="IMPRIMIR"           
                                     action="#{novedadBean.imprimir()}"
                                     rendered="#{!novedadBean.novedadHelper.esNuevo}"
                                     />
                </p:panel>
                <p:fieldset id="areaServidor" legend="#{msg['ec.gob.mrl.smp.procesos.novedades.titulo']}">  

                    <!--  PANEL DE LA INFORMACION CABECERA DEL SERVISOR!-->
                    <p:panel id="panelInformacionServido" > 
                        <h:panelGrid columns="3">
                            <h:outputLabel value="#{msg['ec.gob.mrl.smp.procesos.novedades.cobertura']}: "  
                                           for="coberturaId"
                                           rendered="false"
                                           styleClass="labelFormulario"/>
                            <p:inputTextarea  id="coberturaId"
                                              disabled="true"
                                              rendered="false"
                                              style="width: 700px"
                                              rows="3"
                                              value="#{novedadBean.novedadHelper.nombreUnidadOrganizacional==null?'TODOS':novedadBean.novedadHelper.nombreUnidadOrganizacional}"/>  
                            <p:message for="coberturaId" 
                                       rendered="false"
                                       display="icon"/>                            


                            <h:outputLabel value="* #{msg['ec.gob.mrl.smp.procesos.novedades.periodoNomina']}: "                                           
                                           id="tipoDocumento_lbl"
                                           styleClass="labelFormulario"/>
                            <p:selectOneMenu id="tipoDocumento"    
                                             filter="true" 
                                             filterMatchMode="contains"
                                             required="true"
                                             style="width: 200px;"
                                             disabled="#{!novedadBean.novedadHelper.aceptaCambios}"
                                             requiredMessage="El campo periodo nómina es requerido"
                                             rendered="#{novedadBean.novedadHelper.esNuevo}"
                                             value="#{novedadBean.novedadHelper.periodoNominaFormularioId}">
                                <f:selectItems value="#{novedadBean.novedadHelper.listaPeriodoNomina}"/>                                  
                                <p:ajax listener="#{novedadBean.llenarComboNominasFormulario()}"                                           
                                        update="Nomina_lista lista_datos_adicionales"/>                                
                            </p:selectOneMenu>                           
                            <p:message for="tipoDocumento" 
                                       rendered="#{novedadBean.novedadHelper.esNuevo}"
                                       display="icon"/>

                            <p:inputText style="width: 400px;"
                                         disabled="true"
                                         rendered="#{!novedadBean.novedadHelper.esNuevo}"
                                         value="#{novedadBean.novedadHelper.novedad.nomina.periodoNomina.nombre}"/>
                            <p:outputLabel rendered="#{!novedadBean.novedadHelper.esNuevo}"/>



                            <h:outputLabel value="* #{msg['ec.gob.mrl.smp.procesos.novedades.nomina']}: "                                        
                                           id="Nomina"
                                           styleClass="labelFormulario"/>
                            <p:selectOneMenu id="Nomina_lista"
                                             filter="true" 
                                             filterMatchMode="contains"
                                             required="true"
                                             rendered="#{novedadBean.novedadHelper.esNuevo}"
                                             style="width: 400px;"
                                             disabled="#{!novedadBean.novedadHelper.aceptaCambios}"
                                             requiredMessage="El campo nómina es requerido"
                                             value="#{novedadBean.novedadHelper.nominaFormularioId}">
                                <f:selectItems value="#{novedadBean.novedadHelper.listaNomina}"/>                                  
                                <p:ajax listener="#{novedadBean.llenarComboDatosAdicionalesFormulario()}"                                           
                                        update="lista_datos_adicionales"/>               
                            </p:selectOneMenu>                           
                            <p:message for="Nomina_lista" 
                                       rendered="#{novedadBean.novedadHelper.esNuevo}"
                                       display="icon"/>
                            <p:inputText style="width: 300px;"
                                         disabled="true"
                                         rendered="#{!novedadBean.novedadHelper.esNuevo}"
                                         value="#{novedadBean.novedadHelper.novedad.nomina.descripcion}"/>
                            <p:outputLabel rendered="#{!novedadBean.novedadHelper.esNuevo}"/>




                            <h:outputLabel value="* #{msg['ec.gob.mrl.smp.procesos.novedades.datoAdicional']}: "                                         
                                           id="DatosAdicionales"
                                           styleClass="labelFormulario"/>
                            <p:panel rendered="#{novedadBean.novedadHelper.esNuevo}">
                                <p:selectOneMenu id="lista_datos_adicionales"
                                                 filterMatchMode="contains"
                                                 required="true"
                                                 filter="true"
                                                 style="width: 400px;"
                                                 disabled="#{!novedadBean.novedadHelper.aceptaCambios}"
                                                 requiredMessage="El campo dato adicional es requerido"
                                                 value="#{novedadBean.novedadHelper.datoAdicionalFormularioId}">
                                    <f:selectItems value="#{novedadBean.novedadHelper.listaDatoAdicionales}"/>                                  
                                    <p:ajax listener="#{novedadBean.seleccionDatoAdicional}"                                           
                                            update="@form"/>               
                                </p:selectOneMenu>                           
                                <h:outputLabel 
                                    rendered="#{novedadBean.novedadHelper.datoAdicionalFormularioId!=null}"
                                    value="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.explicacion}"/>
                            </p:panel>
                            <p:message rendered="#{novedadBean.novedadHelper.esNuevo}"
                                       for="lista_datos_adicionales" display="icon"/>                            

                            <p:panel rendered="#{!novedadBean.novedadHelper.esNuevo}">
                                <p:inputText style="width: 400px;"
                                             disabled="true"
                                             value="#{novedadBean.novedadHelper.novedad.datoAdicional.nombre}"/>
                                <h:outputLabel value="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.explicacion}"/>
                            </p:panel>
                            <h:outputLabel 
                                rendered="#{!novedadBean.novedadHelper.esNuevo}"
                                value=""/>


                            <h:outputLabel value="* #{msg['ec.gob.mrl.smp.procesos.novedades.descripcion']}: "  
                                           for="descripcionId"
                                           styleClass="labelFormulario"/>
                            <p:inputTextarea  id="descripcionId"
                                              required="true"
                                              requiredMessage="El campo descripción es requerido"
                                              disabled="#{!novedadBean.novedadHelper.esNuevo}"
                                              maxlength="300"
                                              style="width: 700px"
                                              styleClass="mayusculas"
                                              rows="3"
                                              value="#{novedadBean.novedadHelper.descripcion}"/>  
                            <p:message for="descripcionId" display="icon"/>                            


                        </h:panelGrid>                           
                    </p:panel>

                    <!--  PANEL DEL AREA DE CARGA POR FORMAS SERVISOR!-->

                    <p:panel header="#{msg['ec.gob.mrl.smp.procesos.novedades.servidorPublicoCarga']}"
                             rendered="#{novedadBean.puedeModificar()}">
                        <p:tabView id="tabView" 
                                   dynamic="true">
                            <p:ajax event="tabChange" 
                                    listener="#{novedadBean.onTabChange}"
                                    update="listaServidor,pnlFiltros,numeroDocumento,pnlFiltros2" 
                                    process="@this"/>
                            <p:tab id="tab1" 
                                   title="Cargar servidores por filtro">
                                <p:panel id="pnlFiltros" 
                                         header="Búsqueda de Servidores">
                                    <center>
                                        <h:outputLabel value="#{msg['ec.gob.mrl.smp.procesos.novedades.nombresApellidos']}: "                                                      
                                                       id="numeroDocumento_lbl"                                           
                                                       styleClass="labelFormulario"/>
                                        <p:inputText  id="numeroDocumento"  
                                                      autocomplete="off"                                              
                                                      style="width: 200px" 
                                                      value="#{novedadBean.novedadHelper.nombreServidor}">     

                                        </p:inputText>
                                        <p:commandButton id="numeroDocumento_search"  
                                                         icon="ui-icon-search"                                                         
                                                         action="#{novedadBean.buscarServidorPorNombre()}"
                                                         update="tablaClase"/>
                                        <p:message for="numeroDocumento_search" display="icon" />
                                    </center>
                                    <p:panel id="listaServidor">
                                        <p:dataTable id="tablaClase"
                                                     selectionMode="single"
                                                     selection="#{novedadBean.novedadHelper.servidorSelecto}"
                                                     value="#{novedadBean.novedadHelper.listaServidores}"
                                                     var="servidor"   
                                                     rowKey="#{servidor.id}"                                                                                                      
                                                     paginator="#{true}"
                                                     rows="#{msg['ec.gob.mrl.smp.genericos.tabla.numeroRegistros']}"
                                                     rowIndexVar="rowIndex"> 
                                            <p:ajax event="rowSelect" 
                                                    listener="#{novedadBean.llenarListaNovedadDetalle()}"   
                                                    update=":frmPrincipal:detalleNovedad @parent"/>
                                            <p:column headerText="#{msg['ec.gob.mrl.smp.genericos.etiquetas.numero']}" 
                                                      style="text-align: center; width: 5px">
                                                <h:outputText value="#{rowIndex+1}"/>                                
                                            </p:column>
                                            <p:column headerText="Identificación" 
                                                      style="text-align: center;width: 10px">                                                                 
                                                <h:outputText value="#{servidor.numeroIdentificacion}"/>                                
                                            </p:column>
                                            <p:column headerText="Apellidos y Nombres" 
                                                      sortBy="#{servidor.apellidosNombres}" style="width: 150px">                                                                 
                                                <h:outputText value="#{servidor.apellidosNombres}"/>                                
                                            </p:column>                                          >
                                            <p:column headerText="Unidad Organizacional" 
                                                      style="text-align: left;width: 350px;font-size: 10px">                                                                 
                                                <h:outputText value="#{servidor.distributivoDetalle.distributivo.unidadOrganizacional.ruta}"/>                                
                                            </p:column>

                                        </p:dataTable>

                                    </p:panel>
                                </p:panel>
                            </p:tab>

                            <p:tab id="tab2" title="Cargar servidores por archivo">
                                <p:panel id="pnlFiltros2" header="Búsqueda de Servidores">
                                    <center>
                                        <p:outputPanel id="panelArchivo">
                                            <h:outputLabel value="Archivo:  "                                           
                                                           id="archivo_lbl"                                                                   
                                                           styleClass="labelFormulario"/> 
                                            <h:panelGrid columns="3" >
                                                <h:inputText id="archivoTxt"                                                                 
                                                             value="#{novedadBean.novedadHelper.nombreArchivo}"/>
                                                <p:commandButton                                                                                  
                                                    icon="ui-icon-arrowthickstop-1-n"                                                                                                                                                  
                                                    onclick="cargarArchivoPopUp.show()"                                                    
                                                    title="#{msg['ec.gob.mrl.smp.verificarRequisito.boton.cargarArchivo']}"/>   
                                                <p:message for="numeroDocumento_search" 
                                                           display="icon" />
                                            </h:panelGrid>
                                        </p:outputPanel>
                                        <p:commandLink id="ajax" 
                                                       update=":frmCalificacionEvaluacion" 
                                                       process="@this" oncomplete="servidoresDialog.show();" 
                                                       rendered="#{novedadBean.novedadHelper.listaNovedadDetallesNoExistenServidor.size()>0}"
                                                       style="margin-right:20px;">  
                                            <h:outputText value="Servidores no cargados" style="color: red" />  
                                        </p:commandLink> 
                                        <p:commandLink id="downloadLink" 
                                                       value="Descargar Formato del Archivo" 
                                                       title="Descargar formato del archivo de novedades."                                           
                                                       ajax="false"      
                                                       style="color: blue"
                                                       onclick="PrimeFaces.monitorDownload(start, stop)">                                        
                                            <p:fileDownload value="#{novedadBean.formatoNovedades}"/>
                                        </p:commandLink>

                                    </center>
                                </p:panel>
                            </p:tab>

                            <!--NOVEDADES DETALLES POR PERIODOSSSSSSSSS!-->

                            <!--  <p:tab id="tab3" title="Cargar servidores desde otro periodo.">
                                  <p:panel id="pnlFiltros3" header="Búsqueda de Servidores">
                                      <center>
                                          <p:outputPanel id="panelcarga">
                                              <h:panelGrid columns="4">
                                                  <h:outputLabel value="#{msg['ec.gob.mrl.smp.procesos.novedades.periodoNomina']}: "                                                               
                                                                 id="tipoDocumento_lbl3"
                                                                 styleClass="labelFormulario"/>
                                                  <p:selectOneMenu id="tipoDocumento3"                                                                                                                
                                                                   value="#{novedadBean.novedadHelper.periodoNominaCopiaId}">
                                                      <f:selectItems value="#{novedadBean.novedadHelper.listaPeriodoNomina}"/> 
                                                  </p:selectOneMenu>                           
                                                  <p:message for="tipoDocumento3" display="icon"/>
                                                  <p:commandButton                                                                                  
                                                      value="COPIAR"                                                                                                                                                 
                                                      action="#{novedadBean.copiaNovedad()}"
                                                      update=":frmPrincipal:detalleNovedad, :frmPrincipal:tabla"                                                   
                                                      title="#{msg['ec.gob.mrl.smp.verificarRequisito.boton.cargarArchivo']}"/>                                         
                                              </h:panelGrid>
                                          </p:outputPanel>                                      
                                      </center>
  
                                  </p:panel>
                              </p:tab>
                            -->
                        </p:tabView>  
                    </p:panel>

                    <!--  LIATA GENERAL DE DATOS POR LOS TRES TIPOS DE CARGAS  !-->
                    <p:panel id="detalleNovedad" 
                             rendered="#{novedadBean.novedadHelper.datoAdicionalSeleccionado != null}"
                             header="#{msg['ec.gob.mrl.smp.procesos.novedades.servidorPublico']}" 
                             style="text-align: center">                                                                       
                        <p:outputPanel>
                            <h:panelGrid columns="8">
                                <h:outputLabel value="TOTAL REGISTRO:" style="font-size: 10px; font-weight: bold"/>
                                <h:outputLabel id="totalRegistro" value="#{novedadBean.novedadHelper.totalRegistros}"/>
                                <p:separator style="width: 15px; border: none; color: #ffffff"/>
                                <h:outputLabel  value="TOTAL VALOR:" style="font-size: 10px; font-weight: bold"/>
                                <h:outputLabel id="totalValor" value="#{novedadBean.novedadHelper.totalValor}"/>
                                <p:separator style="width: 15px; border: none; color: #ffffff"/>
                                <h:outputLabel  value="TOTAL REGISTROS CARGADOS:" style="font-size: 10px; font-weight: bold"/>
                                <h:outputLabel id="totalCarga" value="#{novedadBean.novedadHelper.totalRegistrosCargados}"/>
                            </h:panelGrid>
                        </p:outputPanel>                        
                        <p:dataTable id="tabla"
                                     value="#{novedadBean.novedadHelper.listaNovedadDetalles}"
                                     var="tipo"
                                     editable="true"     
                                     editMode="cell"
                                     style="width: 100%"
                                     sortBy="#{tipo.servidor.apellidosNombres}"
                                     paginator="#{true}"
                                     rows="#{msg['ec.gob.mrl.smp.genericos.tabla.numeroRegistros']}"
                                     rowIndexVar="rowIndex">
                            <p:ajax event="cellEdit" listener="#{novedadNominaBean.esValorDetalleEditado(tipo)}" process="@this" />
                            <p:column headerText="#{msg['ec.gob.mrl.smp.genericos.etiquetas.numero']}" 
                                      style="text-align: center; width: 10%">
                                <h:outputText value="#{rowIndex+1}"/>                                
                            </p:column>
                            <p:column headerText="Identificación" 
                                      style="text-align: center; width: 20%"   
                                      filterBy="#{tipo.servidor.numeroIdentificacion}" 
                                      filterStyle="width: 90%"
                                      filterMatchMode="contains">                                                                 
                                <h:outputText value="#{tipo.servidor.numeroIdentificacion}"/>                                
                            </p:column>
                            <p:column headerText="#{msg['ec.gob.mrl.smp.procesos.novedades.nombresApellidos']}" 
                                      filterBy="#{tipo.servidor.apellidosNombres}" 
                                      filterMatchMode="contains" 
                                      style="width: 30%" 
                                      filterStyle="width: 90%">                                                                 
                                <h:outputText value="#{tipo.servidor.apellidosNombres}"/>                                
                            </p:column>                                                                      
                            <p:column headerText="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.unidad}" 
                                      style="width: 10%">  
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{tipo.valor}" />
                                    </f:facet>
                                    <f:facet name="input">
                                        <h:inputText value="#{tipo.valor}" 
                                                     styleClass="campoDecimal" 
                                                     id="valor" 
                                                     readonly="#{!novedadBean.puedeModificar()}"
                                                     style="width: 80%;">
                                            <p:ajax event="keyup" 
                                                    listener="#{novedadBean.validarValor(tipo)}"/>
                                        </h:inputText>
                                    </f:facet>
                                </p:cellEditor> 
                            </p:column>
                            <p:column headerText="Mínimo"
                                      style="width: 10%">                                                                 
                                <h:outputText rendered="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.tipoDato eq 'N'}"
                                              value="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.valorMinimoNumerico}"/>                                
                                <h:outputText rendered="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.tipoDato eq 'T'}"
                                              value="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.valorMinimoTexto}"/>                                
                                <h:outputText rendered="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.tipoDato eq 'F'}"
                                              value="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.valorMinimoFecha}"/>                                

                            </p:column>
                            <p:column headerText="Máximo"
                                      style="width: 10%">                                                                 
                                <h:outputText rendered="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.tipoDato eq 'N'}"
                                              value="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.valorMaximoNumerico}"/>                                
                                <h:outputText rendered="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.tipoDato eq 'T'}"
                                              value="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.valorMaximoTexto}"/>                                
                                <h:outputText rendered="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.tipoDato eq 'F'}"
                                              value="#{novedadBean.novedadHelper.datoAdicionalSeleccionado.valorMaximoFecha}"/>                                

                            </p:column>                                                                      

                            <p:column headerText="#{msg['ec.gob.mrl.smp.genericos.etiquetas.opciones']}"
                                      style="text-align: center; width: 10%">
                                <p:commandButton id="botonEliminar" icon="ui-icon-trash"                                             
                                                 onclick="confirmEliminacion.show()" >
                                    <f:setPropertyActionListener value="#{tipo}" 
                                                                 target="#{novedadBean.novedadHelper.novedadDetalleEliminar}"/>
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>                                                            
                    </p:panel>
                    <center>
                        <p:outputPanel id="panelBotonesModal" 
                                       rendered="#{novedadBean.novedadHelper.datoAdicionalSeleccionado != null}"
                                       autoUpdate="true">
                            <p:commandButton value="ACEPTAR CAMBIOS"                                                
                                             action="#{novedadBean.calculoValores}"                                                 
                                             update="tabla,panelBotonesModal,:frmPrincipal:totalRegistro,:frmPrincipal:totalValor"                                             
                                             title="Clic para Aceptar todos los cambios antes de Guardar" 
                                             ajax="false"
                                             >                                
                            </p:commandButton> 
                        </p:outputPanel>
                    </center>

                </p:fieldset>
                <p:confirmDialog id="popOp" message="#{msg['ec.gob.mrl.smp.genericos.etiquetas.eliminacion.registro']}"
                                 header="Eliminación" 
                                 severity="alert" 
                                 widgetVar="confirmEliminacion">  
                    <div style="text-align: center">
                        <p:commandButton id="acpe" value="#{msg['ec.gob.mrl.smp.genericos.etiquetas.aceptar']}" 
                                         style="margin: auto"
                                         update="frmPrincipal:detalleNovedad"
                                         actionListener="#{novedadBean.borrar}"
                                         oncomplete="confirmEliminacion.hide()"  />  
                        <p:commandButton id="elim" value="#{msg['ec.gob.mrl.smp.genericos.etiquetas.cancelar']}"
                                         onclick="confirmEliminacion.hide()" 
                                         type="button" 
                                         style="margin: auto"/>   
                    </div>
                </p:confirmDialog> 
                <p:confirmDialog id="popup" message="#{msg['ec.gob.mrl.smp.procesos.novedades.confirmacionMsg']}"
                                 header="Guardar" 
                                 severity="alert" 
                                 widgetVar="confirmGuardar">  
                    <div style="text-align: center">
                        <p:commandButton id="aceptar" value="#{msg['ec.gob.mrl.smp.genericos.etiquetas.aceptar']}" 
                                         style="margin: auto"
                                         update="frmPrincipal:detalleNovedad, frmPrincipal"
                                         actionListener="#{novedadBean.guardarNovedad()}"
                                         oncomplete="confirmGuardar.hide()"  />  
                        <p:commandButton id="eliminar" value="#{msg['ec.gob.mrl.smp.genericos.etiquetas.cancelar']}"
                                         onclick="confirmGuardar.hide()" 
                                         type="button" 
                                         style="margin: auto"/>   
                    </div>
                </p:confirmDialog> 
            </h:form> 
            <p:dialog 
                header="Cargar Archivo de Novedades" 
                widgetVar="cargarArchivoPopUp"
                modal="true"
                draggable="false"
                resizable="false"> 
                <h:form enctype="multipart/form-data">                    
                    <p:panel id="panelDlgCargaDocHab" style="border: none;">                        
                        <h:panelGrid columns="2" style="width: 400px">
                            <p:fileUpload
                                id="bandejaTareaBean_cargarDocumento"
                                mode="advanced"
                                showButtons="false"                       
                                process="@this"                               
                                widgetVar="fileuplaod_wgts"
                                update=":frmPrincipal:detalleNovedad, :frmPrincipal:tabla"
                                label="Seleccione...."
                                sizeLimit="2097152"
                                fileUploadListener="#{novedadBean.cargarArchivo}"
                                oncomplete="clearInvalidFileMsg(fileuplaod_wgts); cargarArchivoPopUp.hide()"
                                invalidFileMessage="Formato no permitido, por favor cargar un archivo con formato csv"
                                invalidSizeMessage="El tamaño máximo permitido es de 2MB"                                
                                auto="true">
                            </p:fileUpload>

                        </h:panelGrid>
                        <p:growl id="messages" showDetail="true" for="bandejaTareaBean_cargarDocumento"/>
                    </p:panel>           
                </h:form>

            </p:dialog>

            <!-- Dialogo Servidores que no fueron cargados por que no existen -->
            <p:dialog header="#{msg['ec.gob.mrl.smp.procesos.novedades.servidorPublicosNOExistentes']}"
                      widgetVar="servidoresDialog"
                      modal="true"
                      resizable="false"
                      draggable="true">
                <h:form id="frmCalificacionEvaluacion">               

                    <p:panel id="ServidoresNoExistentes">
                        <h:panelGrid style="width: 100%">
                            <h:commandLink id="exp_xls" title="Exportar Excel" style="position: relative; float: right">
                                <p:graphicImage value="/images/excel.png" alt="Exportar Excel" style="width: 25px; height: 25px"/>
                                <p:dataExporter id="dexporter" type="xls" target="tablaServidoresNoExistentes" 
                                                fileName="servidores_no_existentes"
                                                postProcessor="#{novedadBean.postProcessXLS}" />                        
                            </h:commandLink>
                        </h:panelGrid>

                        <p:dataTable id="tablaServidoresNoExistentes"
                                     value="#{novedadBean.novedadHelper.listaNovedadDetallesNoExistenServidor}"
                                     var="tipo"
                                     sortBy="#{tipo.servidor.apellidosNombres}"
                                     paginator="#{true}"
                                     rows="#{msg['ec.gob.mrl.smp.genericos.tabla.numeroRegistros']}"
                                     rowIndexVar="rowIndex">
                            <p:column style="text-align: center; width: 50px">
                                <f:facet name="header">
                                    <h:outputText value="#{msg['ec.gob.mrl.smp.genericos.etiquetas.numero']}" />
                                </f:facet>
                                <h:outputText value="#{rowIndex+1}"/>                                
                            </p:column>
                            <p:column style="width: 150px">
                                <f:facet name="header">
                                    <h:outputText value="#{msg['ec.gob.mrl.smp.procesos.novedades.numeroIdentificacion']}" />
                                </f:facet>
                                <h:outputText value="#{tipo.servidor.numeroIdentificacion}"/>                                
                            </p:column>
                            <p:column sortBy="#{tipo.servidor.apellidosNombres}" style="width: 100px">
                                <f:facet name="header">
                                    <h:outputText value="#{msg['ec.gob.mrl.smp.procesos.novedades.nombresApellidos']}" />
                                </f:facet>
                                <h:outputText value="#{tipo.servidor.apellidosNombres}"/>                                
                            </p:column>                                          >
                            <p:column style="width: 150px"> 
                                <f:facet name="header">
                                    <h:outputText value="#{msg['ec.gob.mrl.smp.procesos.novedades.valor']}" />
                                </f:facet>
                                <h:outputText value="#{tipo.valorNumericoEnCSV}"/>                                
                            </p:column> 
                            <p:column style="width: 150px">   
                                <f:facet name="header">
                                    <h:outputText value="#{msg['ec.gob.mrl.smp.procesos.novedades.observaciones']}" />
                                </f:facet>
                                <h:outputText value="#{tipo.erroresAlCargarServidor}"/>                                
                            </p:column>        
                        </p:dataTable>   
                    </p:panel>                     
                </h:form>
            </p:dialog>
            <script type="text/javascript">
                function start() {
                    statusDialog.show();
                }

                function stop() {
                    statusDialog.hide();
                }
            </script> 
        </ui:define>
    </ui:composition>
</html>